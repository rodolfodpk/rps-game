services:

  nginx:
    image: nginx:latest
    container_name: nginx
    ports:
      - "9999:80"  # Change here: Host port 9999 maps to container port 80
    volumes:
      - "./etc/nginx/nginx.conf:/etc/nginx/nginx.conf:ro"
    depends_on:
      - app1
      - app2
      - app3
  #    networks:
  #      - hazelcast-network

  app1:
    image: rps-game
    ports:
      - "8081:8080"
    environment:
      JAVA_OPTS: "-DDEFAULT_BOUNDED_ELASTIC_ON_VIRTUAL_THREAD=true"
  #    depends_on:
  #      - nginx-server
  #    networks:
  #      - hazelcast-network

  app2:
    image: rps-game
    ports:
      - "8082:8080"
    environment:
      JAVA_OPTS: "-DDEFAULT_BOUNDED_ELASTIC_ON_VIRTUAL_THREAD=true"
  #    depends_on:
  #      - nginx-server
  #    networks:
  #      - hazelcast-network

  app3:
    image: rps-game
    ports:
      - "8083:8080"
    environment:
      JAVA_OPTS: "-DDEFAULT_BOUNDED_ELASTIC_ON_VIRTUAL_THREAD=true"
    #    depends_on:
    #      - nginx-server
#    networks:
#      - hazelcast-network

#  management-center:
#    image: hazelcast/management-center:5.5.2
#    ports:
#      - "8083:8080"
#    environment:
#      - MC_DEFAULT_CLUSTER=dev
#      - MC_DEFAULT_CLUSTER_MEMBERS=hazelcast

#networks:
#  hazelcast-network:
#    driver: bridge